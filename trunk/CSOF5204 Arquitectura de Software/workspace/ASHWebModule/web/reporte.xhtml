<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core">

    <ui:composition template="/template.xhtml">
        <ui:define name="title">
            <h:outputText value="Consulta de Información Consolidada"></h:outputText>
        </ui:define>
        <ui:define name="body">

            <h:form>
                <h:panelGrid id="filtro" style="width:100%;text-align:left" columns="4">
                    <h:outputLabel id="lblReport"
                                   value="Reporte consolidad mostrando todos los eventos registrados (ordenadas por tipo de evento) de forma cronológica (hora, día, mes, año)." />
                    <h:commandButton id="btnSearch0" value="Anterior" style="float:right;" rendered="#{ReportConsolidatedInformationBean.page!=1 and Login.authorizationAdm}"
                                     action="#{ReportConsolidatedInformationBean.informationConsult}" >
                        <f:setPropertyActionListener target="#{ReportConsolidatedInformationBean.page}" value="#{ReportConsolidatedInformationBean.page-1}" />
                    </h:commandButton>

                    <h:commandButton id="btnSearch" value="#{ReportConsolidatedInformationBean.page}" style="float:right;"
                                     action="#{ReportConsolidatedInformationBean.informationConsult}"  rendered="#{Login.authorizationAdm}"/>

                    <h:commandButton id="btnSearch1" value="Siguiente" style="float:right;"
                                     action="#{ReportConsolidatedInformationBean.informationConsult}"  rendered="#{Login.authorizationAdm}">
                        <f:setPropertyActionListener target="#{ReportConsolidatedInformationBean.page}" value="#{ReportConsolidatedInformationBean.page+1}" />
                    </h:commandButton>
                    
                    <br />
                    <h:outputText value="Usted no esta autorizado para utilizar esta función" style="color:red;" rendered="#{!Login.authorizationAdm}"/>
                </h:panelGrid>
            </h:form>

            <h:dataTable id="tableResult" value="#{ReportConsolidatedInformationBean.listEvents}"
                         var="item" rendered="#{not empty ReportConsolidatedInformationBean.listEvents}"
                         style="width:100%;text-align:center;background-color: #f7f7f7; border: 2px #4e6a71 groove;">

                <h:column>
                    <f:facet name="header">
                        <h:outputLabel id="lblEvento" value="EVENTO" style="color: cornflowerblue;font-weight: bold; "/>
                    </f:facet>
                    <h:outputLabel id="txtEvento" value="#{item.eventName}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputLabel id="lblFecha" value="FECHA" style="color: cornflowerblue;font-weight: bold" />
                    </f:facet>
                    <h:outputLabel id="txtFecha" value="#{item.eventDate}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputLabel id="lblCasa" value="CASA U OFICINA" style="color: cornflowerblue;font-weight: bold" />
                    </f:facet>
                    <h:outputLabel id="txtCasa" value="#{item.homeOffice}" />
                </h:column>
            </h:dataTable>            
            
            <h:form rendered="#{Login.person == null}">
                <script type="text/javascript">
     location.href='http://localhost:8080/ASHWebModule/';
                </script>
            </h:form>

        </ui:define>
    </ui:composition>
</html>

